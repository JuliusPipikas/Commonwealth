{"ast":null,"code":"import _classCallCheck from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import AuthService from\"../../services/auth.service\";import CharacterDataService from\"../../services/character.service\";import LocationDataService from\"../../services/location.service\";var AddCharacter=/*#__PURE__*/function(_Component){_inherits(AddCharacter,_Component);var _super=_createSuper(AddCharacter);function AddCharacter(props){var _this;_classCallCheck(this,AddCharacter);_this=_super.call(this,props);_this.onChangeCharacterName=_this.onChangeCharacterName.bind(_assertThisInitialized(_this));_this.onChangeCharacterClass=_this.onChangeCharacterClass.bind(_assertThisInitialized(_this));_this.onChangeLevel=_this.onChangeLevel.bind(_assertThisInitialized(_this));_this.onChangeStatus=_this.onChangeStatus.bind(_assertThisInitialized(_this));_this.onChangeStatArray=_this.onChangeStatArray.bind(_assertThisInitialized(_this));_this.onChangeLocationId=_this.onChangeLocationId.bind(_assertThisInitialized(_this));_this.onChangeUserId=_this.onChangeUserId.bind(_assertThisInitialized(_this));_this.onChangeApproved=_this.onChangeApproved.bind(_assertThisInitialized(_this));_this.saveCharacter=_this.saveCharacter.bind(_assertThisInitialized(_this));_this.newCharacter=_this.newCharacter.bind(_assertThisInitialized(_this));_this.state={character_id:null,character_name:\"\",character_class:\"\",level:null,status:\"Alive\",stat_array:\"\",user_id:null,location_id:0,approved:0,checkForAdmin:null,locations:[],submitted:false};return _this;}_createClass(AddCharacter,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var user=AuthService.getCurrentUser();if(user){this.setState({user_id:user.user_id,checkForAdmin:user.user_id==2});}LocationDataService.getAll().then(function(response){_this2.setState({locations:response.data});});}},{key:\"onChangeCharacterName\",value:function onChangeCharacterName(e){this.setState({character_name:e.target.value});}},{key:\"onChangeCharacterClass\",value:function onChangeCharacterClass(e){this.setState({character_class:e.target.value});}},{key:\"onChangeLevel\",value:function onChangeLevel(e){this.setState({level:e.target.value});}},{key:\"onChangeStatus\",value:function onChangeStatus(e){this.setState({status:e.target.value});}},{key:\"onChangeStatArray\",value:function onChangeStatArray(e){this.setState({stat_array:e.target.value});}},{key:\"onChangeLocationId\",value:function onChangeLocationId(e){this.setState({location_id:e.target.value});}},{key:\"onChangeUserId\",value:function onChangeUserId(e){this.setState({user_id:e.target.value});}},{key:\"onChangeApproved\",value:function onChangeApproved(e){this.setState({approved:e.target.value});}},{key:\"saveCharacter\",value:function saveCharacter(){var _this3=this;var data={character_name:this.state.character_name,character_class:this.state.character_class,level:parseInt(this.state.level),status:this.state.status,stat_array:this.state.stat_array,location_id:this.state.location_id,user_id:this.state.user_id,approved:this.state.approved};console.log(this.state.character_name);console.log(this.state.character_class);console.log(this.state.level);console.log(this.state.status);console.log(this.state.stat_array);console.log(this.state.location_id);console.log(this.state.user_id);console.log(this.state.approved);CharacterDataService.create(data).then(function(response){_this3.setState({character_id:response.data.character_id,character_name:response.data.character_name,character_class:response.data.character_class,level:response.data.level,status:response.data.status,stat_array:response.data.stat_array,location_id:response.data.stat_array,user_id:response.data.stat_array,approved:response.data.approved,submitted:true});console.log(response.data);}).catch(function(e){console.log(e);});}},{key:\"newCharacter\",value:function newCharacter(){this.setState({character_id:null,character_name:\"\",character_class:\"\",level:1,status:\"Alive\",stat_array:\"\",user_id:null,location_id:0,approved:0,checkForAdmin:null,locations:[],submitted:false});}},{key:\"render\",value:function render(){var _this$state=this.state,checkForAdmin=_this$state.checkForAdmin,locations=_this$state.locations;return/*#__PURE__*/_jsx(\"div\",{className:\"submit-form\",children:this.state.submitted?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"You submitted successfully!\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:this.newCharacter,children:\"Add\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"character_name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"character_name\",required:true,value:this.state.character_name,onChange:this.onChangeCharacterName,name:\"character_name\",placeholder:\"Your character's name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"character_class\",children:\"Class\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"character_class\",required:true,value:this.state.character_class,onChange:this.onChangeCharacterClass,name:\"character_class\",placeholder:\"Your character's class\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"level\",children:\"Level\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"level\",required:true,value:this.state.level,onChange:this.onChangeLevel,name:\"level\",min:\"1\",max:\"20\",placeholder:\"Your character's level\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"status\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",id:\"status\",required:true,value:this.state.status,onChange:this.onChangeStatus,name:\"status\",placeholder:\"Your character's current status\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Alive\",children:\"Alive\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Retired\",children:\"Retired\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Deceased\",children:\"Deceased\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stat_array\",children:\"Stat Array\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"stat_array\",required:true,value:this.state.stat_array,onChange:this.onChangeStatArray,name:\"stat_array\",placeholder:\"Ex. 11, 11, 11, 11, 11, 11\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"location_id\",children:\"Location\"}),/*#__PURE__*/_jsx(\"select\",{className:\"form-control\",id:\"location_id\",required:true,value:this.state.location_id,onChange:this.onChangeLocationId,name:\"location_id\",placeholder:\"Your character's current location\",children:locations.map(function(location,index){return/*#__PURE__*/_jsx(\"option\",{value:location.location_id,children:location.location_name},index);})})]}),checkForAdmin&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"user_id\",children:\"User\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"user_id\",required:true,value:this.state.user_id,onChange:this.onChangeUserId,name:\"user_id\",placeholder:\"[ADMIN FIELD] User\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.saveCharacter,className:\"btn btn-success\",children:\"Submit\"})]})});}}]);return AddCharacter;}(Component);export{AddCharacter as default};","map":{"version":3,"sources":["G:/commonwealth-backend/commonwealth-frontend/src/components/characters/add-character.component.js"],"names":["React","Component","AuthService","CharacterDataService","LocationDataService","AddCharacter","props","onChangeCharacterName","bind","onChangeCharacterClass","onChangeLevel","onChangeStatus","onChangeStatArray","onChangeLocationId","onChangeUserId","onChangeApproved","saveCharacter","newCharacter","state","character_id","character_name","character_class","level","status","stat_array","user_id","location_id","approved","checkForAdmin","locations","submitted","user","getCurrentUser","setState","getAll","then","response","data","e","target","value","parseInt","console","log","create","catch","map","location","index","location_name"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport AuthService from \"../../services/auth.service\";\r\nimport CharacterDataService from \"../../services/character.service\";\r\nimport LocationDataService from \"../../services/location.service\";\r\n\r\nexport default class AddCharacter extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeCharacterName = this.onChangeCharacterName.bind(this);\r\n    this.onChangeCharacterClass = this.onChangeCharacterClass.bind(this);\r\n    this.onChangeLevel = this.onChangeLevel.bind(this);\r\n    this.onChangeStatus = this.onChangeStatus.bind(this);\r\n    this.onChangeStatArray = this.onChangeStatArray.bind(this);\r\n    this.onChangeLocationId = this.onChangeLocationId.bind(this);\r\n    this.onChangeUserId = this.onChangeUserId.bind(this);\r\n    this.onChangeApproved = this.onChangeApproved.bind(this);\r\n    this.saveCharacter = this.saveCharacter.bind(this);\r\n    this.newCharacter = this.newCharacter.bind(this);\r\n\r\n    this.state = {\r\n      character_id: null,\r\n      character_name: \"\",\r\n      character_class: \"\",\r\n      level: null,\r\n      status: \"Alive\",\r\n      stat_array: \"\",\r\n      user_id: null,\r\n      location_id: 0,\r\n      approved: 0,\r\n      checkForAdmin: null,\r\n      locations: [],\r\n\r\n      submitted: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    const user = AuthService.getCurrentUser();\r\n\r\n    if (user) {\r\n      this.setState({\r\n        user_id: user.user_id,\r\n        checkForAdmin: user.user_id == 2\r\n      });\r\n    }\r\n\r\n    LocationDataService.getAll().then( response => { this.setState({\r\n      locations: response.data\r\n    })\r\n    })\r\n  }\r\n\r\n  onChangeCharacterName(e) {\r\n    this.setState({\r\n      character_name: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeCharacterClass(e) {\r\n    this.setState({\r\n      character_class: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeLevel(e) {\r\n    this.setState({\r\n      level: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeStatus(e) {\r\n    this.setState({\r\n      status: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeStatArray(e) {\r\n    this.setState({\r\n      stat_array: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeLocationId(e) {\r\n    this.setState({\r\n      location_id: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeUserId(e) {\r\n    this.setState({\r\n      user_id: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeApproved(e){\r\n    this.setState({\r\n      approved: e.target.value\r\n    });\r\n  }\r\n\r\n  saveCharacter() {\r\n    var data = {\r\n      character_name: this.state.character_name,\r\n      character_class: this.state.character_class,\r\n      level: parseInt(this.state.level),\r\n      status: this.state.status,\r\n      stat_array: this.state.stat_array,\r\n      location_id: this.state.location_id,\r\n      user_id: this.state.user_id,\r\n      approved: this.state.approved,\r\n    };\r\n\r\n    console.log(this.state.character_name);\r\n    console.log(this.state.character_class);\r\n    console.log(this.state.level);\r\n    console.log(this.state.status);\r\n    console.log(this.state.stat_array);\r\n    console.log(this.state.location_id);\r\n    console.log(this.state.user_id);\r\n    console.log(this.state.approved);\r\n\r\n    CharacterDataService.create(data)\r\n      .then(response => {\r\n        this.setState({\r\n          character_id: response.data.character_id,\r\n          character_name: response.data.character_name,\r\n          character_class: response.data.character_class,\r\n          level: response.data.level,\r\n          status: response.data.status,\r\n          stat_array: response.data.stat_array,\r\n          location_id: response.data.stat_array,\r\n          user_id: response.data.stat_array,\r\n          approved: response.data.approved,\r\n\r\n          submitted: true\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  newCharacter() {\r\n    this.setState({\r\n      character_id: null,\r\n      character_name: \"\",\r\n      character_class: \"\",\r\n      level: 1,\r\n      status: \"Alive\",\r\n      stat_array: \"\",\r\n      user_id: null,\r\n      location_id: 0,\r\n      approved: 0,\r\n      checkForAdmin: null,\r\n      locations: [],\r\n\r\n      submitted: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n\r\n    const { checkForAdmin, locations } = this.state;\r\n\r\n    return (\r\n\r\n      <div className=\"submit-form\">\r\n        {this.state.submitted ? (\r\n          <div>\r\n            <h4>You submitted successfully!</h4>\r\n            <button className=\"btn btn-success\" onClick={this.newCharacter}>\r\n              Add\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"character_name\">Name</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"character_name\"\r\n                required\r\n                value={this.state.character_name}\r\n                onChange={this.onChangeCharacterName}\r\n                name=\"character_name\"\r\n                placeholder=\"Your character's name\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"character_class\">Class</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"character_class\"\r\n                required\r\n                value={this.state.character_class}\r\n                onChange={this.onChangeCharacterClass}\r\n                name=\"character_class\"\r\n                placeholder=\"Your character's class\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"level\">Level</label>\r\n              <input\r\n                type=\"number\"\r\n                className=\"form-control\"\r\n                id=\"level\"\r\n                required\r\n                value={this.state.level}\r\n                onChange={this.onChangeLevel}\r\n                name=\"level\"\r\n                min=\"1\"\r\n                max=\"20\"\r\n                placeholder=\"Your character's level\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"status\">Status</label>\r\n              <select className=\"form-control\" id=\"status\" required value={this.state.status}\r\n                onChange={this.onChangeStatus}\r\n                name=\"status\"\r\n                placeholder=\"Your character's current status\">\r\n              <option value= \"Alive\">Alive</option>\r\n              <option value= \"Retired\">Retired</option>\r\n              <option value= \"Deceased\">Deceased</option>\r\n            </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"stat_array\">Stat Array</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"stat_array\"\r\n                required\r\n                value={this.state.stat_array}\r\n                onChange={this.onChangeStatArray}\r\n                name=\"stat_array\"\r\n                placeholder=\"Ex. 11, 11, 11, 11, 11, 11\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"location_id\">Location</label>\r\n              <select className=\"form-control\" id=\"location_id\" required value={this.state.location_id}\r\n                onChange={this.onChangeLocationId}\r\n                name=\"location_id\"\r\n                placeholder=\"Your character's current location\">\r\n              {locations.map((location, index) => (\r\n                <option value={location.location_id} key={index}>{location.location_name}</option>\r\n              ))}\r\n            </select>\r\n            </div>\r\n                \r\n            {checkForAdmin && (\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"user_id\">User</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"user_id\"\r\n                required\r\n                value={this.state.user_id}\r\n                onChange={this.onChangeUserId}\r\n                name=\"user_id\"\r\n                placeholder=\"[ADMIN FIELD] User\"\r\n              />\r\n            </div>\r\n            )}\r\n\r\n            <button onClick={this.saveCharacter} className=\"btn btn-success\">\r\n              Submit\r\n            </button>\r\n          </div>)}\r\n      </div>\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}