{"ast":null,"code":"import _objectSpread from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"G:/commonwealth-backend/commonwealth-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import CharacterDataService from\"../../services/character.service\";import AuthService from\"../../services/auth.service\";var Character=/*#__PURE__*/function(_Component){_inherits(Character,_Component);var _super=_createSuper(Character);function Character(props){var _currentCharacter;var _this;_classCallCheck(this,Character);_this=_super.call(this,props);_this.onChangeCharacterName=_this.onChangeCharacterName.bind(_assertThisInitialized(_this));_this.onChangeCharacterClass=_this.onChangeCharacterClass.bind(_assertThisInitialized(_this));_this.onChangeLevel=_this.onChangeLevel.bind(_assertThisInitialized(_this));_this.onChangerStatus=_this.onChangeStatus.bind(_assertThisInitialized(_this));_this.onChangeStatArray=_this.onChangeStatArray.bind(_assertThisInitialized(_this));_this.onChangeLocationId=_this.onChangeLocationId.bind(_assertThisInitialized(_this));_this.onChangeUserId=_this.onChangeUserId.bind(_assertThisInitialized(_this));_this.onChangeApproved=_this.onChangeApproved.bind(_assertThisInitialized(_this));_this.getCharacter=_this.getCharacter.bind(_assertThisInitialized(_this));_this.updateCharacter=_this.updateCharacter.bind(_assertThisInitialized(_this));_this.deleteCharacter=_this.deleteCharacter.bind(_assertThisInitialized(_this));_this.state={currentCharacter:(_currentCharacter={character_id:null,character_name:\"\",character_class:\"\",level:null,status:\"\",stat_array:\"\",user_id:null,location_id:null,approved:null},_defineProperty(_currentCharacter,\"user_id\",null),_defineProperty(_currentCharacter,\"checkForAdmin\",null),_defineProperty(_currentCharacter,\"submitted\",false),_currentCharacter),message:\"\"};return _this;}_createClass(Character,[{key:\"componentDidMount\",value:function componentDidMount(){this.getCharacter(this.props.match.params.character_id);var user=AuthService.getCurrentUser();if(user){this.setState({user_id:user.user_id,checkForAdmin:user.user_id==2});}}},{key:\"onChangeCharacterName\",value:function onChangeCharacterName(e){var character_name=e.target.value;this.setState(function(prevState){return{currentCharacter:_objectSpread(_objectSpread({},prevState.currentCharacter),{},{character_name:character_name})};});}},{key:\"onChangeCharacterClass\",value:function onChangeCharacterClass(e){var character_class=e.target.value;this.setState(function(prevState){return{currentCharacter:_objectSpread(_objectSpread({},prevState.currentCharacter),{},{character_class:character_class})};});}},{key:\"onChangeLevel\",value:function onChangeLevel(e){var level=e.target.value;this.setState(function(prevState){return{currentCharacter:_objectSpread(_objectSpread({},prevState.currentCharacter),{},{level:level})};});}},{key:\"onChangeStatus\",value:function onChangeStatus(e){var status=e.target.value;this.setState(function(prevState){return{currentCharacter:_objectSpread(_objectSpread({},prevState.currentCharacter),{},{status:status})};});}},{key:\"onChangeStatArray\",value:function onChangeStatArray(e){var stat_array=e.target.value;this.setState(function(prevState){return{currentCharacter:_objectSpread(_objectSpread({},prevState.currentCharacter),{},{stat_array:stat_array})};});}},{key:\"onChangeLocationId\",value:function onChangeLocationId(e){var location_id=e.target.value;this.setState(function(prevState){return{currentCharacter:_objectSpread(_objectSpread({},prevState.currentCharacter),{},{location_id:location_id})};});}},{key:\"onChangeUserId\",value:function onChangeUserId(e){var user_id=e.target.value;this.setState(function(prevState){return{currentCharacter:_objectSpread(_objectSpread({},prevState.currentCharacter),{},{user_id:user_id})};});}},{key:\"onChangeApproved\",value:function onChangeApproved(e){var approved=e.target.value;this.setState(function(prevState){return{currentCharacter:_objectSpread(_objectSpread({},prevState.currentCharacter),{},{approved:approved})};});}},{key:\"getCharacter\",value:function getCharacter(character_id){var _this2=this;CharacterDataService.get(character_id).then(function(response){_this2.setState({currentCharacter:response.data});console.log(response.data);}).catch(function(e){console.log(e);});}},{key:\"updateCharacter\",value:function updateCharacter(){var _this3=this;CharacterDataService.update(this.state.currentCharacter.character_id,this.state.currentCharacter).then(function(response){console.log(response.data);_this3.setState({message:\"The Character was updated successfully!\"});}).catch(function(e){console.log(e);});}},{key:\"deleteCharacter\",value:function deleteCharacter(){var _this4=this;CharacterDataService.delete(this.state.currentCharacter.character_id).then(function(response){console.log(response.data);_this4.props.history.push('/Characters');}).catch(function(e){console.log(e);});}},{key:\"render\",value:function render(){var _this$state=this.state,currentCharacter=_this$state.currentCharacter,user_id=_this$state.user_id,checkForAdmin=_this$state.checkForAdmin;if(user_id==currentCharacter.user_id||checkForAdmin){return/*#__PURE__*/_jsx(\"div\",{children:currentCharacter?/*#__PURE__*/_jsxs(\"div\",{className:\"edit-form\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Character\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"character_name\",children:\"Character Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"character_name\",value:currentCharacter.character_name,onChange:this.onChangeCharacterName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"character_class\",children:\"Character Class\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"character_class\",value:currentCharacter.character_class,onChange:this.onChangeCharacterClass})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"level\",children:\"Level\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"level\",value:currentCharacter.level,onChange:this.onChangeLevel})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"status\",children:\"Status\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"status\",value:currentCharacter.status,onChange:this.onChangeStatus})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stat_array\",children:\"Stat Array\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"stat_array\",value:currentCharacter.stat_array,onChange:this.onChangeStatArray})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"location_id\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"location_id\",value:currentCharacter.location_id,onChange:this.onChangeLocationId})]}),checkForAdmin&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"user_id\",children:\"Player\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"user_id\",value:currentCharacter.user_id,onChange:this.onChangeUserId})]}),checkForAdmin&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"approved\",children:\"Approved\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"approved\",value:currentCharacter.approved,onChange:this.onChangeApproved})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"badge badge-danger mr-2\",onClick:this.deleteCharacter,children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"badge badge-success\",onClick:this.updateCharacter,children:\"Update\"}),/*#__PURE__*/_jsx(\"p\",{children:this.state.message})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Please click on a Character...\"})]})});}else{return/*#__PURE__*/_jsx(\"h3\",{children:\"Can't edit others' characters :\\\\\"});}}}]);return Character;}(Component);export{Character as default};","map":{"version":3,"sources":["G:/commonwealth-backend/commonwealth-frontend/src/components/characters/character.component.js"],"names":["React","Component","CharacterDataService","AuthService","Character","props","onChangeCharacterName","bind","onChangeCharacterClass","onChangeLevel","onChangerStatus","onChangeStatus","onChangeStatArray","onChangeLocationId","onChangeUserId","onChangeApproved","getCharacter","updateCharacter","deleteCharacter","state","currentCharacter","character_id","character_name","character_class","level","status","stat_array","user_id","location_id","approved","message","match","params","user","getCurrentUser","setState","checkForAdmin","e","target","value","prevState","get","then","response","data","console","log","catch","update","delete","history","push"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport CharacterDataService from \"../../services/character.service\";\r\nimport AuthService from \"../../services/auth.service\";\r\n\r\nexport default class Character extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onChangeCharacterName = this.onChangeCharacterName.bind(this);\r\n    this.onChangeCharacterClass = this.onChangeCharacterClass.bind(this);\r\n    this.onChangeLevel = this.onChangeLevel.bind(this);\r\n    this.onChangerStatus = this.onChangeStatus.bind(this);\r\n    this.onChangeStatArray = this.onChangeStatArray.bind(this);\r\n    this.onChangeLocationId = this.onChangeLocationId.bind(this);\r\n    this.onChangeUserId = this.onChangeUserId.bind(this);\r\n    this.onChangeApproved = this.onChangeApproved.bind(this);\r\n    this.getCharacter = this.getCharacter.bind(this);\r\n    this.updateCharacter = this.updateCharacter.bind(this);\r\n    this.deleteCharacter = this.deleteCharacter.bind(this);\r\n\r\n    this.state = {\r\n      currentCharacter: {\r\n      character_id: null,\r\n      character_name: \"\",\r\n      character_class: \"\",\r\n      level: null,\r\n      status: \"\",\r\n      stat_array: \"\",\r\n      user_id: null,\r\n      location_id: null,\r\n      approved: null,\r\n      user_id: null,\r\n      checkForAdmin: null,\r\n\r\n      submitted: false\r\n      },\r\n      message: \"\"\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCharacter(this.props.match.params.character_id);\r\n    const user = AuthService.getCurrentUser();\r\n\r\n    if (user) {\r\n      this.setState({\r\n        user_id: user.user_id,\r\n        checkForAdmin: user.user_id == 2\r\n      });\r\n    }\r\n  }\r\n\r\n  onChangeCharacterName(e) {\r\n    const character_name = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentCharacter: {\r\n          ...prevState.currentCharacter,\r\n          character_name: character_name\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeCharacterClass(e) {\r\n    const character_class = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentCharacter: {\r\n          ...prevState.currentCharacter,\r\n          character_class: character_class\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeLevel(e) {\r\n    const level = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentCharacter: {\r\n          ...prevState.currentCharacter,\r\n          level: level\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeStatus(e) {\r\n    const status = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentCharacter: {\r\n          ...prevState.currentCharacter,\r\n          status: status\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeStatArray(e) {\r\n    const stat_array = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentCharacter: {\r\n          ...prevState.currentCharacter,\r\n          stat_array: stat_array\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeLocationId(e) {\r\n    const location_id = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentCharacter: {\r\n          ...prevState.currentCharacter,\r\n          location_id: location_id\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeUserId(e) {\r\n    const user_id = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentCharacter: {\r\n          ...prevState.currentCharacter,\r\n          user_id: user_id\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  onChangeApproved(e) {\r\n    const approved = e.target.value;\r\n\r\n    this.setState(function(prevState) {\r\n      return {\r\n        currentCharacter: {\r\n          ...prevState.currentCharacter,\r\n          approved: approved\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  getCharacter(character_id) {\r\n    CharacterDataService.get(character_id)\r\n      .then(response => {\r\n        this.setState({\r\n          currentCharacter: response.data\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  updateCharacter() {\r\n    CharacterDataService.update(\r\n      this.state.currentCharacter.character_id,\r\n      this.state.currentCharacter\r\n    )\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.setState({\r\n          message: \"The Character was updated successfully!\"\r\n        });\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  deleteCharacter() {    \r\n    CharacterDataService.delete(this.state.currentCharacter.character_id)\r\n      .then(response => {\r\n        console.log(response.data);\r\n        this.props.history.push('/Characters')\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { currentCharacter, user_id, checkForAdmin } = this.state;\r\n\r\n    if(user_id == currentCharacter.user_id || checkForAdmin){\r\n    \r\n    return (\r\n      <div>\r\n        {currentCharacter ? (\r\n          <div className=\"edit-form\">\r\n            <h4>Character</h4>\r\n            <form>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"character_name\">Character Name</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"character_name\"\r\n                  value={currentCharacter.character_name}\r\n                  onChange={this.onChangeCharacterName}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"character_class\">Character Class</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"character_class\"\r\n                  value={currentCharacter.character_class}\r\n                  onChange={this.onChangeCharacterClass}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"level\">Level</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"level\"\r\n                  value={currentCharacter.level}\r\n                  onChange={this.onChangeLevel}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"status\">Status</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"status\"\r\n                  value={currentCharacter.status}\r\n                  onChange={this.onChangeStatus}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"stat_array\">Stat Array</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"stat_array\"\r\n                  value={currentCharacter.stat_array}\r\n                  onChange={this.onChangeStatArray}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"location_id\">Location</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"location_id\"\r\n                  value={currentCharacter.location_id}\r\n                  onChange={this.onChangeLocationId}\r\n                />\r\n              </div>\r\n\r\n              {checkForAdmin && (\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"user_id\">Player</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"user_id\"\r\n                  value={currentCharacter.user_id}\r\n                  onChange={this.onChangeUserId}\r\n                />\r\n              </div>\r\n              )}\r\n\r\n              {checkForAdmin && (\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"approved\">Approved</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"approved\"\r\n                  value={currentCharacter.approved}\r\n                  onChange={this.onChangeApproved}\r\n                />\r\n              </div>\r\n              )}\r\n\r\n            </form>\r\n\r\n            <button\r\n              className=\"badge badge-danger mr-2\"\r\n              onClick={this.deleteCharacter}\r\n            >\r\n              Delete\r\n            </button>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"badge badge-success\"\r\n              onClick={this.updateCharacter}\r\n            >\r\n              Update\r\n            </button>\r\n            <p>{this.state.message}</p>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <br />\r\n            <p>Please click on a Character...</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  else{\r\n    return(\r\n    <h3>Can't edit others' characters :\\</h3>\r\n    );\r\n  }\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}